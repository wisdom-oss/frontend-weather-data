<div>
    <div class="columns">
        <!-- Map and Switches -->
        <div class="column is-three-quarters">
            <!-- Map element-->
            <map
                #map
                height="{{ heightWeatherBox }}"
                [markers]="stationMarkers"
                [layerSelectable]="false"
                center="51.165691, 10.451526"
                zoom="6"
            ></map>
            <!-- Switches -->
            <div class="columns is-multiline">
                <!-- historical switch -->
                <div class="column">
                    <div class="field">
                        <input
                            id="filterSwitch-historical"
                            type="checkbox"
                            name="filterSwitch-historical"
                            class="switch is-rounded is-primary"
                            (change)="filterHistorical(); showStations()"
                        />
                        <label for="filterSwitch-historical">
                            {{ "weather-data.switches.historical" | translate }}
                        </label>
                    </div>
                </div>
                <!-- Capability switches -->
                <div class="column" *ngFor="let filterOption of filterStates | keyvalue">
                    <div class="field">
                        <input
                            id="filterSwitch-{{ filterOption.key }}"
                            type="checkbox"
                            name="filterSwitch-{{ filterOption.key }}"
                            class="switch is-rounded"
                            [checked]="filterOption.value"
                            (change)="switchFilterOption(filterOption.key); showStations()"
                        />
                        <label for="filterSwitch-{{ filterOption.key }}">
                            {{ "weather-data.switches." + filterOption.key | translate }}
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Information -->
        <div class="column is-one-quarter">
            <div class="box" [style]="{ height: heightWeatherBox }">
                <div *ngIf="station">
                    <!-- Title -->
                    <h1 class="title has-text-centered is-size-4">{{ station.name }}, {{ station.state }}</h1>
                    <br />
                    <h2 class="title has-text-centered is-size-6">
                        {{ "weather-data.title.name_attribute" | translate }}
                    </h2>
                    <!-- drop down parameters -->
                    <div *ngFor="let type of availableResolutions | keyvalue">
                        <div class="dropdown is-hoverable">
                            <div class="dropdown-trigger">
                                <button class="button" aria-haspopup="true" aria-controls="dropdown-menu4">
                                    <span>{{ "weather-data.switches." + type.key | translate }}</span>
                                    <span class="icon is-small">
                                        <i class="fas fa-angle-down" aria-hidden="true"></i>
                                    </span>
                                </button>
                            </div>
                            <div class="dropdown-menu" id="dropdown-menu4" role="menu">
                                <div class="dropdown-content">
                                    <div class="dropdown-item" *ngFor="let resolution of type.value">
                                        <button
                                            class="button"
                                            (click)="
                                                createRangeOfTime(type.key, resolution);
                                                setTypeAndResolution(type.key, resolution)
                                            "
                                        >
                                            {{ "weather-data.resolutions." + resolution | translate }}
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <br />
                    <!-- download box -->
                    <div class="is-flex is-flex-direction-column is-justify-content-space-between" style="height: 30vh">
                        <span class="tag is-primary is-normal">{{ usedDataType }}</span>
                        <span class="tag is-info is-normal">{{ usedResolution }}</span>
                        <!-- Date Picker Time -->
                        <div class="has-text-centered">
                            <input
                                type="date"
                                [mode]="BulmaCalendarMode.DEFAULT"
                                [options]="{ isRange: true, showHeader: false }"
                                (select)="handleDatePickEvent($event)"
                            />
                        </div>
                        <!-- Availability features-->
                        <div class="columns">
                            <div class="column is-half has-text-centered">
                                {{ "weather-data.tags.availableFrom" | translate }} <br />
                                {{ availableTimeSlots[0] }}
                            </div>
                            <div class="column is-half has-text-centered">
                                {{ "weather-data.tags.availableUntil" | translate }} <br />
                                {{ availableTimeSlots[1] }}
                            </div>
                        </div>
                        <!-- download data-->
                        <div class="has-text-centered">
                            <br />
                            <button
                                class="button is-primary"
                                [disabled]="!usedDataType"
                                (click)="startWeatherDataDownload()"
                            >
                                Download
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
